   name: Update place.json

   on:
     workflow_dispatch:
     schedule:
       # Every 5 minutes
       - cron: "*/5 * * * *"

   permissions:
     contents: write

   concurrency:
     group: update-place
     cancel-in-progress: true

   jobs:
     update:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v4

         - uses: actions/setup-python@v5
           with:
             python-version: "3.12"

         - name: Compute place.json
           env:
             TARGET_NAME: "Сагдуллин Марсель"
             TARGET_FORM: "11"
             REG_API_URL: "https://reg.algocode.ru/_api/reg_2026.json"
             OUT_FILE: "place.json"
           run: |
             python compute_place.py

         - name: Commit and push if changed
           run: |
             if git diff --quiet -- place.json; then
               echo "No changes."
               exit 0
             fi
             git config user.name "github-actions[bot]"
             git config user.email "github-actions[bot]@users.noreply.github.com"
             git add place.json
             git commit -m "Update place.json"
             git push
